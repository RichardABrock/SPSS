<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>MA Research Methods Learning SPSS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Index_files/libs/clipboard/clipboard.min.js"></script>
<script src="Index_files/libs/quarto-html/quarto.js"></script>
<script src="Index_files/libs/quarto-html/popper.min.js"></script>
<script src="Index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Index_files/libs/quarto-html/anchor.min.js"></script>
<link href="Index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


<link rel="stylesheet" href="styles.css">
</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">MA Research Methods Learning SPSS</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="spss" class="level2">
<h2 class="anchored" data-anchor-id="spss">SPSS</h2>
<p>SPSS for Windows Workshop</p>
<p>Section 1: The SPSS environment The aim of this section is to familiarise ourselves with the SPSS environment. The SPSS data editor contains two views which you can switch between using the tabs at the bottom left of the screen (figure 1).</p>
<p>Figure 1. (1) The data view, where we enter our data (similar to an Excel spreadsheet). Each row represents a case (e.g.&nbsp;person, school, organisation).<br>
(2) The variable view, where we label and describe our data. Here, each row represents a variable (e.g.&nbsp;age, gender, educational attainment). The columns provide information about the characteristics of variables. Table 1 explains each of the columns.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Data%20view.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<ol type="1">
<li>The data view, where we enter our data (similar to an Excel spreadsheet). Each row represents a case (e.g.&nbsp;person, school, organisation).<br>
</li>
<li>The variable view, where we label and describe our data. Here, each row represents a variable (e.g.&nbsp;age, gender, educational attainment). The columns provide information about the characteristics of variables. Table 1 explains each of the columns.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>NB: Somewhat confusingly, SPSS sometimes refers to p-value as ‘sig’. What p-value really signifies is the probability that the results have occurred by chance, given the null hypothesis. If the p (probability) is low, then we say the result is significant. In Education and many social sciences, the ‘cut off’ point is often 0.05. And we refer to this cut-off as ‘alpha’.</strong></p>
</div>
</div>
<p><strong>Table 1. Explanation of columns in SPSS variable view</strong></p>
<table class="table">
<colgroup>
<col style="width: 2%">
<col style="width: 97%">
</colgroup>
<tbody>
<tr class="odd">
<td>Column title</td>
<td>What it means</td>
</tr>
<tr class="even">
<td>Name</td>
<td>This column provides the name of the variable. Older versions of SPSS were limited to 8 character names, which is why you often find rather intriguing names for variables in data sets. New versions of SPSS are not limited to 8 characters, but lengthy descriptions should not be included in the Name. They go in the Label column.</td>
</tr>
<tr class="odd">
<td>Type</td>
<td>This column indicates the type of variable that is reflected in this particular row. There are 8 options to choose from: Numeric, Comma, Dot, Scientific notation, Date, Dollar, Custom currency, and String. Most variables beginning users will encounter are either Numeric or String variables. Numeric variables are numbers that either represent a value (e.g., 1=Catholic) or are the value of interest (height=73 inches). String numbers are text and can only be treated as such. As a result, very few manipulations can be performed on them in SPSS.</td>
</tr>
<tr class="even">
<td>Width</td>
<td>The number of digits displayed for numerical values or the length of a string variable.</td>
</tr>
<tr class="odd">
<td>Decimals</td>
<td>This column allows you to control the number of characters after the decimal place.</td>
</tr>
<tr class="even">
<td>Label</td>
<td>This column allows you to provide a more extensive description of the variable.</td>
</tr>
<tr class="odd">
<td>Values</td>
<td>This column allows you to provide a key for what the numbers of a numeric variable may represent (e.g., 1=Catholic, 2=Protestant).</td>
</tr>
<tr class="even">
<td>Missing</td>
<td>This column allows you to indicate whether there are any missing values in a variable. Values marked as missing are excluded from analyses in SPSS.</td>
</tr>
<tr class="odd">
<td>Columns</td>
<td>The width of each column in the Data View spreadsheet. Note that this is not the same as the number of digits displayed for each value. This simply refers to the width of the actual column in the spreadsheet.</td>
</tr>
<tr class="even">
<td>Align</td>
<td>This column indicates the alignment of the variable in the Data View.</td>
</tr>
<tr class="odd">
<td>Measure</td>
<td>This column indicates the level of measurement of the variable. There are three from which you can choose: Nominal, Ordinal, and Scale.</td>
</tr>
<tr class="even">
<td>Role</td>
<td>The role that a variable will play in your analyses (i.e., independent variable, dependent variable, both independent and dependent). Some options in SPSS allow you to pre-select variables for particular analyses based on their defined roles. Any variable that meets the role requirements will be available for use in such analyses. It is not recommended that you tamper with this, at least not as novices</td>
</tr>
</tbody>
</table>
<p><a href="http://en.wikibooks.org/wiki/Using_SPSS_and_PASW/Understanding_the_Variable_View">Source</a> <a href="https://libguides.library.kent.edu/SPSS/DefineVariables">and</a></p>
<p><u><strong>Entering data</strong></u></p>
<p>Click on ‘file’, then ‘new’, and then ‘data’ to open a blank data editor.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/blank.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p><strong>Task 1:</strong> Give your variables the following characteristics (in the variable view).</p>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
</colgroup>
<tbody>
<tr class="odd">
<td>
<p>
<strong>Name</strong>
</p>
</td>
<td>
<p>
<strong>Type</strong>
</p>
</td>
<td>
<p>
<strong>Width</strong>
</p>
</td>
<td>
<p>
<strong>Deci-mals</strong>
</p>
</td>
<td>
<p>
<strong>Label</strong>
</p>
</td>
<td>
<p>
<strong>Values</strong>
</p>
</td>
<td>
<p>
<strong>Miss</strong>
</p>
<p>
<strong>-ing</strong>
</p>
</td>
<td>
<p>
<strong>Columns</strong>
</p>
</td>
<td>
<p>
<strong>Align</strong>
</p>
</td>
<td>
<p>
<strong>Measure</strong>
</p>
</td>
</tr>
<tr class="even">
<td>
<p>
IDnumber
</p>
</td>
<td>
<p>
Numeric
</p>
</td>
<td>
<p>
8
</p>
</td>
<td>
<p>
0
</p>
</td>
<td>
<p>
Participant ID
</p>
</td>
<td>
<p>
None
</p>
</td>
<td>
<p>
None
</p>
</td>
<td>
<p>
8
</p>
</td>
<td>
<p>
Right
</p>
</td>
<td>
<p>
Scale
</p>
</td>
</tr>
<tr class="odd">
<td>
<p>
Gender
</p>
</td>
<td>
<p>
Numeric
</p>
</td>
<td>
<p>
8
</p>
</td>
<td>
<p>
0
</p>
</td>
<td>
<p>
Gender of Participant
</p>
</td>
<td>
<p>
1 = Male
</p>
<p>
2 = Female
</p>
</td>
<td>
<p>
None
</p>
</td>
<td>
<p>
8
</p>
</td>
<td>
<p>
Right
</p>
</td>
<td>
<p>
Nominal
</p>
</td>
</tr>
<tr class="even">
<td>
<p>
IQ
</p>
</td>
<td>
<p>
Numeric
</p>
</td>
<td>
<p>
8
</p>
</td>
<td>
<p>
0
</p>
</td>
<td>
<p>
IQ score
</p>
</td>
<td>
<p>
None
</p>
</td>
<td>
<p>
None
</p>
</td>
<td>
<p>
8
</p>
</td>
<td>
<p>
Right
</p>
</td>
<td>
<p>
Scale
</p>
</td>
</tr>
</tbody>
</table>
<p>Note: type, width, columns, align can often be left as the default. Also, changing the decimal value will not alter the information you input if you only input whole numbers.</p>
<p><strong>Task 2:</strong> Try entering the following data into SPSS (in the data view).</p>
<table class="table">
<colgroup>
<col style="width: 15%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<tbody>
<tr class="odd">
<td>IDnumber</td>
<td>Gender</td>
<td>IQ</td>
</tr>
<tr class="even">
<td>1</td>
<td>Male</td>
<td>105</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Female</td>
<td>110</td>
</tr>
<tr class="even">
<td>3</td>
<td>Female</td>
<td>112</td>
</tr>
<tr class="odd">
<td>4</td>
<td>Female</td>
<td>102</td>
</tr>
<tr class="even">
<td>5</td>
<td>Male</td>
<td>100</td>
</tr>
<tr class="odd">
<td>6</td>
<td>Male</td>
<td>120</td>
</tr>
<tr class="even">
<td>7</td>
<td>Female</td>
<td>98</td>
</tr>
<tr class="odd">
<td>8</td>
<td>Male</td>
<td>103</td>
</tr>
<tr class="even">
<td>9</td>
<td>Female</td>
<td>128</td>
</tr>
<tr class="odd">
<td>10</td>
<td>Male</td>
<td>110</td>
</tr>
</tbody>
</table>
<p>Remember that 1 = Male, 2 = Female for Gender</p>
<p>Finally, locate the Output Window, which is empty at the moment.</p>
<p>** You may want to save your data file that is generated to <u>in a space you can find (e.g., on your desktop for now)</u> using the filename <strong>section1.sav</strong>**</p>
<p><u><strong>Section 2: Describing your data</strong></u></p>
<p>The first aim of this task is to obtain descriptive statistics such as means, standard deviations, frequencies and range of various variables. Download the data file <a href="https://emckclac-my.sharepoint.com/:u:/g/personal/k1765032_kcl_ac_uk/EXVBVr6lIrdHmn1HPtvmW5MBRt8gy-TNsTfOXn8tNa4reg?e=1bTWvG">PISA_2022.sav</a> and open it in SPSS.</p>
<p><img src="images/Open_file.jpg" width="900" height="420"></p>
<p>The data are from the OECD’s 2022 survey - the full data set has been cut down to make things easier. You will find the following variables in the data:</p>
<table class="table">
<colgroup>
<col style="width: 17%">
<col style="width: 82%">
</colgroup>
<tbody>
<tr class="odd">
<td>Item</td>
<td>Description</td>
</tr>
<tr class="even">
<td>ST004D01T</td>
<td>Gender: Male / Female / NA.</td>
</tr>
<tr class="odd">
<td>CNT</td>
<td>Country</td>
</tr>
<tr class="even">
<td>PV1MATH</td>
<td>Mathematics test scores (0-1000)</td>
</tr>
<tr class="odd">
<td>PV1READ</td>
<td>Reading test scores (0-1000)</td>
</tr>
<tr class="even">
<td>PV1SCIE.</td>
<td>Science test scores (0-1000)</td>
</tr>
<tr class="odd">
<td>HOMEPOS</td>
<td>A measure of wealth (home possessions) Normalised with a mean of 0,</td>
</tr>
<tr class="even">
<td>ESCS</td>
<td>A measure of social class Normalised with a mean of 0,</td>
</tr>
<tr class="odd">
<td>OCOD1</td>
<td>Mother’s occupation</td>
</tr>
<tr class="even">
<td>OCOD2</td>
<td>Father’s occupation</td>
</tr>
<tr class="odd">
<td>ST253Q01JA</td>
<td>How many digital devices in your home?</td>
</tr>
<tr class="even">
<td>ST016Q01NA</td>
<td>How satisfied are you with life (/10)</td>
</tr>
<tr class="odd">
<td>ST253Q01JA</td>
<td>How many digital devices in your home?</td>
</tr>
</tbody>
</table>
<p><strong>Task 1:</strong> Obtain descriptive statistics for the following variables</p>
<div class="question">
<details>
<summary>
Q1: How many students are there in the data set?
</summary>
<p>613,744 students</p>
</details>
<details>
<summary>
Q2: What kind of variable is ST004D01T?
</summary>
<p>Categorical (it is a gender variable)</p>
</details>
<details>
<summary>
Q3: What kind of variable is ST253Q0JA?
</summary>
<p>Ordinal - it is a count of digital devices in the home (the responses are: There are no devices, one, two, three etc)</p>
</details>
</div>
</section>
<section id="describing-data" class="level2">
<h2 class="anchored" data-anchor-id="describing-data">Describing data</h2>
<p>There are a number of ways of obtaining information describing data using SPSS, in this exercise you will use the Descriptives option in the Analyze  Descriptive statistics menu (see Figure 2.1). The Descriptives option should be used to generate descriptive information about continuous variables using all cases in the data file. The Frequencies option should be used to generate descriptive information about categorical variables using all cases in the data file.</p>
<p><img src="images/Descriptive.png" width="900" height="420"></p>
<p>Figure 2.1</p>
<p><strong>Task 2: The <u>D</u>escriptives option</strong></p>
<p>Assume we are required to produce descriptive information such as the mean math score by gender for all students in the sample. To do this, first select the <u><strong>A</strong></u><strong>nalyze</strong> pull down menu. Choose the <strong>D<u>e</u>scriptive statistics</strong> option. You are presented with a further menu where you should click on <u><strong>D</strong></u><strong>escriptives</strong>.</p>
<p>You are then presented with a window showing a list of variables in the <strong>PISA_2022.sav</strong> data file (see figure 2.2). First select the variables you want to look at. Here select both AGE and TENURE (by clicking on the variable in the list and then clicking the arrow button). Now you have to choose what type of statistics you wish to generate. To do this click on the grey <strong>Options</strong> button.</p>
<p>You can now choose various descriptive statistics which describe the nature of your data. To select an option, click on the word and a cross will appear in its box indicating that it is selected. Select these statistics: <strong>Mean, Standard Deviation, Minimum, Maximum, and Range</strong>. Once these are selected click on the <strong>Continue</strong> button. Then click <strong>OK</strong>.</p>
<div style="text-align:center">
<p><img src="images/Descriptive_dialog.png" width="300" height="300"></p>
</div>
<p>Figure 2.2</p>
<p>You are then presented with the output screen presented in figure 2.3, the Descriptives requested will have been generated in this window. You can look at your output by moving about in the window using the arrow keys on the keyboard or the Page up/ Page down buttons. You can also use the mouse and the “Scroll Bar” on the right hand edge of the output window to move around.</p>
<p>** You may want to save your output that is generated to <u>in the same space you saved the previous work</u> using the filename <strong>section2.spv,</strong> but do not close this window once you have saved it**</p>
<div style="text-align:center">
<p><img src="images/Descriptive_out.png" width="800" height="533"></p>
</div>
<p>Figure 2.3</p>
<p><strong>Task 2:</strong> More descriptive statistics</p>
<div class="question">
<details>
<summary>
Q4: What is the mean and standard deviation of the mathematics score?
</summary>
<p>Mean = 440.87467 Standard deviation = 101.840726</p>
</details>
<details>
<summary>
Q5: Which subject has the highest maximum score?
</summary>
<p>Mathematics (943.041)</p>
</details>
<details>
<summary>
Q6: What is the range of the number of digital devices in the home? What is the mean?
</summary>
<p>From 1 to 8 - the mean is 6.9855</p>
</details>
</div>
</section>
<section id="task-3-the-frequencies-option" class="level2">
<h2 class="anchored" data-anchor-id="task-3-the-frequencies-option"><u><strong>Task 3: The Frequencies option</strong></u></h2>
<p>Assume we are required to produce other descriptive information such as the number and percentage of teachers who are female, who work part-time and who are satisfied with their jobs. To do this, again select the <u><strong>A</strong></u><strong>nalyze</strong> pull down menu. Choose the <strong>D<u>e</u>scriptive statistics</strong> option, but this time click on <u><strong>F</strong></u><strong>requencies</strong> in the further menu.</p>
<p>You are again presented with a window showing a list of variables in the <strong>PISA_2022.sav</strong> data file (see figure 2.4). First select the variables you want to look at. Here select GENDER, STATUS and JOBSAT (by clicking on the variable in the list and then clicking the arrow button). SPSS will produce counts and percentages by default for this analysis. If you want to display your frequency data in a chart, you can do this by clicking on the <u><strong>C</strong></u><strong>harts</strong> button and selecting a <u><strong>B</strong></u><strong>ar chart</strong>.</p>
<div style="text-align:center">
<p><img src="images/Frequency.png" width="300" height="300"></p>
</div>
<p>Figure 2.4</p>
<p>Click on OK and you will go straight to the output window where your information is generated. You may have some information in this window from the previous task so be aware of this. The new output provides frequency counts of the data for each of the variables you selected and also a series of percentages (see Fig 2.5). Note that for this analysis Percent and Valid Percent are the same as there are no missing data for these variables.</p>
<pre><code>** Save your output again (overwrite the previous section2.spv as long as your output file includes the data generated for both task 2 and 3).</code></pre>
<p><strong>Task 3</strong> Frequencies</p>
<div class="question">
<details>
<summary>
Q7: What percentage of boys and girls are in the survey?
</summary>
<p>49.8% Female; 50.2% Male</p>
</details>
<details>
<summary>
Q8: How many mothers are there in the survey who are electrical engineers?
</summary>
<p>125</p>
</details>
</div>
</section>
<section id="section-3-performing-a-chi-square-test" class="level2">
<h2 class="anchored" data-anchor-id="section-3-performing-a-chi-square-test">Section 3: Performing a Chi-square test</h2>
<pre><code>The researcher who collected the data was then interested in whether there were any associations between some of the variables studied in the survey. In particular, the researcher was interested in examining the associations between two of the categorical variables in the questionnaire. In order to do this Chi-square tests were required. 

    The hypothesis that the researcher wanted to test:</code></pre>
<p>H1: Job satisfaction is associated with gender</p>
<p>Task 1: Conducting a Chi Square test To carry out a Chi-square analysis click on Descriptive statistics in the Analyze pull down menu. Then select Crosstabs. You will see the variables in the file teachers1.sav listed in the Crosstabs window on the left (See Fig 3.1 and 3.2). Put the dependent variable (DV) into the Row(s): box and the independent variable (IV) into the Column(s): box (remember it is the IV that affects the DV, not the other way round). Once you have selected the two variables, click on the Statistics button (on the side of the window). Fig 3.3 will appear and here select the Chi Square option. Then click on Continue. Click on the Cells button and Fig 3.4 will appear. In the Counts sector click on the Expected selection, the Observed selection should already be selected. This ensures that the expected and the observed frequencies are generated in each cell of the Chi square contingency table. Also in this window, select the Percentages: Column option. Click on Continue then OK to generate your output.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>